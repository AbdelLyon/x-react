{"version":3,"file":"x-react.es.js","sources":["../../../src/chart/Chart.tsx"],"sourcesContent":["import { cn } from \"@/utils\";\nimport type {\n  ChartData,\n  ChartOptions,\n  ChartTypeRegistry,\n  InteractionItem,\n  TooltipItem,\n} from \"chart.js\";\nimport {\n  CategoryScale,\n  Chart as ChartJS,\n  Legend,\n  LinearScale,\n  Title,\n  Tooltip,\n  BarController,\n  DoughnutController,\n  BarElement,\n  ArcElement,\n  PointElement,\n  LineElement,\n  RadialLinearScale,\n  ScatterController,\n  PolarAreaController,\n} from \"chart.js\";\nimport type { JSX } from \"react\";\nimport { useRef } from \"react\";\nimport type { ChartProps } from \"react-chartjs-2\";\nimport { Chart as ChartRoot, getElementAtEvent } from \"react-chartjs-2\";\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  Title,\n  Tooltip,\n  Legend,\n  RadialLinearScale,\n  BarElement,\n  ArcElement,\n  PointElement,\n  LineElement,\n  BarController,\n  DoughnutController,\n  ScatterController,\n  PolarAreaController,\n);\n\ntype ChartType = keyof ChartTypeRegistry;\n\ninterface ChartClassNames {\n  root?: string;\n  canvas?: string;\n  title?: string;\n  legend?: string;\n  tooltip?: string;\n}\n\ninterface ChartBaseProps<T extends ChartType> {\n  data: ChartData<T>;\n  options?: ChartOptions<T>;\n  type: T;\n  getElementSelected?: (elementSelected: InteractionItem[]) => void;\n  classNames?: ChartClassNames;\n  width?: number | string;\n  height?: number | string;\n  responsive?: boolean;\n  maintainAspectRatio?: boolean;\n  title?: string;\n  showLegend?: boolean;\n  showTooltip?: boolean;\n  legendPosition?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  customTooltip?: (context: TooltipItem<T>) => string | string[] | undefined;\n}\n\ntype Props<T extends ChartType> = ChartBaseProps<T> &\n  Omit<ChartProps<T>, keyof ChartBaseProps<T>>;\n\nconst defaultClassNames: Required<ChartClassNames> = {\n  root: \"relative w-full h-max flex flex-col items-center border border-default justify-center bg-white dark:bg-content1 p-6 shadow-md rounded-xl\",\n  canvas: \"w-full h-[400px]\",\n  title: \"text-lg font-semibold text-center mb-4\",\n  legend: \"mt-4\",\n  tooltip: \"bg-white p-2 rounded shadow-lg border text-sm\",\n};\n\nexport const Chart = <T extends ChartType>({\n  type,\n  data,\n  options,\n  getElementSelected,\n  classNames = {},\n  responsive = true,\n  maintainAspectRatio = false,\n  title,\n  showLegend = true,\n  showTooltip = true,\n  legendPosition = \"top\",\n  customTooltip,\n  ...props\n}: Props<T>): JSX.Element => {\n  const chartRef = useRef<ChartJS<T>>(null);\n\n  const mergedClassNames = {\n    root: cn(defaultClassNames.root, classNames.root),\n    canvas: cn(defaultClassNames.canvas, classNames.canvas),\n    title: cn(defaultClassNames.title, classNames.title),\n    legend: cn(defaultClassNames.legend, classNames.legend),\n    tooltip: cn(defaultClassNames.tooltip, classNames.tooltip),\n  };\n\n  const handleClick = (event: React.MouseEvent<HTMLCanvasElement>): void => {\n    if (chartRef.current !== null) {\n      const element = getElementAtEvent(\n        chartRef.current as unknown as ChartJS<keyof ChartTypeRegistry>,\n        event,\n      );\n      if (element.length > 0 && getElementSelected) {\n        getElementSelected(element);\n      }\n    }\n  };\n  const defaultOptions: ChartOptions<T> = {\n    responsive,\n    maintainAspectRatio,\n    plugins: {\n      title:\n        title !== undefined\n          ? {\n              display: true,\n              text: title,\n              font: {\n                size: 16,\n                weight: \"bold\",\n              },\n              padding: {\n                top: 10,\n                bottom: 20,\n              },\n            }\n          : undefined,\n      legend: {\n        display: showLegend,\n        position: legendPosition,\n      },\n      tooltip: showTooltip\n        ? {\n            enabled: true,\n            backgroundColor: \"white\",\n            titleColor: \"#1f2937\",\n            bodyColor: \"#4b5563\",\n            borderColor: \"#e5e7eb\",\n            borderWidth: 1,\n            padding: 8,\n            cornerRadius: 4,\n            bodyFont: {\n              size: 14,\n            },\n            titleFont: {\n              size: 14,\n              weight: \"bold\" as const,\n            },\n            ...(customTooltip && {\n              callbacks: {\n                label: customTooltip,\n              },\n            }),\n          }\n        : undefined,\n    },\n  } as ChartOptions<T>;\n\n  const mergedOptions: ChartOptions<T> = {\n    ...defaultOptions,\n    ...options,\n  };\n\n  return (\n    <div className={mergedClassNames.root}>\n      <ChartRoot\n        ref={chartRef}\n        data={data}\n        options={mergedOptions}\n        type={type}\n        onClick={handleClick}\n        className={mergedClassNames.canvas}\n        {...props}\n      />\n    </div>\n  );\n};\n\nChart.displayName = \"Chart\";\n\nexport type {\n  ChartType,\n  ChartClassNames,\n  ChartTypeRegistry,\n  ChartJS,\n  ChartOptions,\n  ChartProps,\n  ChartBaseProps,\n};\n"],"names":["ChartJS","ChartRoot"],"mappings":";;;;;AA+BAA,QAAQ;AAAA,EACN;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAgCA,MAAM,oBAA+C;AAAA,EACnD,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,SAAS;AACX;AAEO,MAAM,QAAQ,CAAsB;AAAA,EACzC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,aAAa,CAAC;AAAA,EACd,aAAa;AAAA,EACb,sBAAsB;AAAA,EACtB;AAAA,EACA,aAAa;AAAA,EACb,cAAc;AAAA,EACd,iBAAiB;AAAA,EACjB;AAAA,EACA,GAAG;AACL,MAA6B;AACrB,QAAA,WAAW,OAAmB,IAAI;AAExC,QAAM,mBAAmB;AAAA,IACvB,MAAM,GAAG,kBAAkB,MAAM,WAAW,IAAI;AAAA,IAChD,QAAQ,GAAG,kBAAkB,QAAQ,WAAW,MAAM;AAAA,IACtD,OAAO,GAAG,kBAAkB,OAAO,WAAW,KAAK;AAAA,IACnD,QAAQ,GAAG,kBAAkB,QAAQ,WAAW,MAAM;AAAA,IACtD,SAAS,GAAG,kBAAkB,SAAS,WAAW,OAAO;AAAA,EAC3D;AAEM,QAAA,cAAc,CAAC,UAAqD;AACpE,QAAA,SAAS,YAAY,MAAM;AAC7B,YAAM,UAAU;AAAA,QACd,SAAS;AAAA,QACT;AAAA,MACF;AACI,UAAA,QAAQ,SAAS,KAAK,oBAAoB;AAC5C,2BAAmB,OAAO;AAAA,MAAA;AAAA,IAC5B;AAAA,EAEJ;AACA,QAAM,iBAAkC;AAAA,IACtC;AAAA,IACA;AAAA,IACA,SAAS;AAAA,MACP,OACE,UAAU,SACN;AAAA,QACE,SAAS;AAAA,QACT,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,MAAM;AAAA,UACN,QAAQ;AAAA,QACV;AAAA,QACA,SAAS;AAAA,UACP,KAAK;AAAA,UACL,QAAQ;AAAA,QAAA;AAAA,MAGZ,IAAA;AAAA,MACN,QAAQ;AAAA,QACN,SAAS;AAAA,QACT,UAAU;AAAA,MACZ;AAAA,MACA,SAAS,cACL;AAAA,QACE,SAAS;AAAA,QACT,iBAAiB;AAAA,QACjB,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,QACb,SAAS;AAAA,QACT,cAAc;AAAA,QACd,UAAU;AAAA,UACR,MAAM;AAAA,QACR;AAAA,QACA,WAAW;AAAA,UACT,MAAM;AAAA,UACN,QAAQ;AAAA,QACV;AAAA,QACA,GAAI,iBAAiB;AAAA,UACnB,WAAW;AAAA,YACT,OAAO;AAAA,UAAA;AAAA,QACT;AAAA,MACF,IAEF;AAAA,IAAA;AAAA,EAER;AAEA,QAAM,gBAAiC;AAAA,IACrC,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AAEA,SACG,oBAAA,OAAA,EAAI,WAAW,iBAAiB,MAC/B,UAAA;AAAA,IAACC;AAAAA,IAAA;AAAA,MACC,KAAK;AAAA,MACL;AAAA,MACA,SAAS;AAAA,MACT;AAAA,MACA,SAAS;AAAA,MACT,WAAW,iBAAiB;AAAA,MAC3B,GAAG;AAAA,IAAA;AAAA,EAAA,GAER;AAEJ;AAEA,MAAM,cAAc;"}