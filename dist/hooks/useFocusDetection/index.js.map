{"version":3,"file":"index.js","sources":["../../../src/hooks/useFocusDetection.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nexport interface UseFocusDetectionOptions {\n  onFocus?: (event: FocusEvent) => void;\n  onBlur?: (event: FocusEvent) => void;\n}\n\nconst containsRelatedTarget = (event: FocusEvent): boolean => {\n  if (\n    event.currentTarget instanceof HTMLElement &&\n    event.relatedTarget instanceof HTMLElement\n  ) {\n    return event.currentTarget.contains(event.relatedTarget);\n  }\n  return false;\n};\n\nexport const useFocusDetection = <T extends HTMLElement>({\n  onBlur,\n  onFocus,\n}: UseFocusDetectionOptions = {}): {\n  ref: React.RefObject<T>;\n  focused: boolean;\n} => {\n  const ref = useRef<T>(null);\n  const [focused, setFocused] = useState(false);\n  const focusedRef = useRef(false);\n\n  const _setFocused = (value: boolean): void => {\n    setFocused(value);\n    focusedRef.current = value;\n  };\n\n  useEffect(() => {\n    const handleFocusIn = (event: FocusEvent): void => {\n      if (!focusedRef.current) {\n        _setFocused(true);\n        onFocus?.(event);\n      }\n    };\n\n    const handleFocusOut = (event: FocusEvent): void => {\n      if (focusedRef.current && !containsRelatedTarget(event)) {\n        _setFocused(false);\n        onBlur?.(event);\n      }\n    };\n\n    if (ref.current) {\n      const element = ref.current;\n      element.addEventListener(\"focusin\", handleFocusIn);\n      element.addEventListener(\"focusout\", handleFocusOut);\n\n      return () => {\n        element.removeEventListener(\"focusin\", handleFocusIn);\n        element.removeEventListener(\"focusout\", handleFocusOut);\n      };\n    }\n  }, [onFocus, onBlur]);\n\n  return { ref: ref as React.RefObject<T>, focused };\n};\n"],"names":["containsRelatedTarget","event","useFocusDetection","onBlur","onFocus","ref","useRef","focused","setFocused","useState","focusedRef","_setFocused","value","useEffect","handleFocusIn","handleFocusOut","element"],"mappings":";AAOA,MAAMA,IAAwB,CAACC,MAE3BA,EAAM,yBAAyB,eAC/BA,EAAM,yBAAyB,cAExBA,EAAM,cAAc,SAASA,EAAM,aAAa,IAElD,IAGIC,IAAoB,CAAwB;AAAA,EACvD,QAAAC;AAAA,EACA,SAAAC;AACF,IAA8B,OAGzB;AACG,QAAAC,IAAMC,EAAU,IAAI,GACpB,CAACC,GAASC,CAAU,IAAIC,EAAS,EAAK,GACtCC,IAAaJ,EAAO,EAAK,GAEzBK,IAAc,CAACC,MAAyB;AAC5C,IAAAJ,EAAWI,CAAK,GAChBF,EAAW,UAAUE;AAAA,EACvB;AAEA,SAAAC,EAAU,MAAM;AACR,UAAAC,IAAgB,CAACb,MAA4B;AAC7C,MAACS,EAAW,YACdC,EAAY,EAAI,GAChBP,IAAUH,CAAK;AAAA,IAEnB,GAEMc,IAAiB,CAACd,MAA4B;AAClD,MAAIS,EAAW,WAAW,CAACV,EAAsBC,CAAK,MACpDU,EAAY,EAAK,GACjBR,IAASF,CAAK;AAAA,IAElB;AAEA,QAAII,EAAI,SAAS;AACf,YAAMW,IAAUX,EAAI;AACZ,aAAAW,EAAA,iBAAiB,WAAWF,CAAa,GACzCE,EAAA,iBAAiB,YAAYD,CAAc,GAE5C,MAAM;AACH,QAAAC,EAAA,oBAAoB,WAAWF,CAAa,GAC5CE,EAAA,oBAAoB,YAAYD,CAAc;AAAA,MACxD;AAAA,IAAA;AAAA,EACF,GACC,CAACX,GAASD,CAAM,CAAC,GAEb,EAAE,KAAAE,GAAgC,SAAAE,EAAQ;AACnD;"}