{"version":3,"file":"x-react.es.js","sources":["../../../src/hooks/useInterval.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\ninterface UseIntervalOptions {\n  autoInvoke?: boolean;\n}\n\ninterface UseIntervalReturn {\n  start: () => void;\n  stop: () => void;\n  toggle: () => void;\n  active: boolean;\n}\n\nexport const useInterval = (\n  fn: () => void,\n  interval: number,\n  { autoInvoke = false }: UseIntervalOptions = {},\n): UseIntervalReturn => {\n  const [active, setActive] = useState<boolean>(false);\n  const intervalRef = useRef<number | null>(null);\n  const fnRef = useRef<() => void>(fn);\n\n  const start = (): void => {\n    setActive((old) => {\n      if (\n        !old &&\n        (intervalRef.current === null || intervalRef.current === -1)\n      ) {\n        intervalRef.current = window.setInterval(fnRef.current, interval);\n      }\n      return true;\n    });\n  };\n\n  const stop = (): void => {\n    setActive(false);\n    window.clearInterval(intervalRef.current ?? -1);\n    intervalRef.current = -1;\n  };\n\n  const toggle = (): void => {\n    if (active) {\n      stop();\n    } else {\n      start();\n    }\n  };\n\n  useEffect(() => {\n    fnRef.current = fn;\n    if (active) {\n      start();\n    }\n    return stop;\n  }, [fn, active, interval]);\n\n  useEffect(() => {\n    if (autoInvoke) {\n      start();\n    }\n    return () => stop();\n  }, []);\n\n  return { start, stop, toggle, active };\n};\n"],"names":[],"mappings":";AAaa,MAAA,cAAc,CACzB,IACA,UACA,EAAE,aAAa,MAA8B,IAAA,OACvB;AACtB,QAAM,CAAC,QAAQ,SAAS,IAAI,SAAkB,KAAK;AAC7C,QAAA,cAAc,OAAsB,IAAI;AACxC,QAAA,QAAQ,OAAmB,EAAE;AAEnC,QAAM,QAAQ,MAAY;AACxB,cAAU,CAAC,QAAQ;AACjB,UACE,CAAC,QACA,YAAY,YAAY,QAAQ,YAAY,YAAY,KACzD;AACA,oBAAY,UAAU,OAAO,YAAY,MAAM,SAAS,QAAQ;AAAA,MAAA;AAE3D,aAAA;AAAA,IAAA,CACR;AAAA,EACH;AAEA,QAAM,OAAO,MAAY;AACvB,cAAU,KAAK;AACR,WAAA,cAAc,YAAY,WAAW,EAAE;AAC9C,gBAAY,UAAU;AAAA,EACxB;AAEA,QAAM,SAAS,MAAY;AACzB,QAAI,QAAQ;AACL,WAAA;AAAA,IAAA,OACA;AACC,YAAA;AAAA,IAAA;AAAA,EAEV;AAEA,YAAU,MAAM;AACd,UAAM,UAAU;AAChB,QAAI,QAAQ;AACJ,YAAA;AAAA,IAAA;AAED,WAAA;AAAA,EACN,GAAA,CAAC,IAAI,QAAQ,QAAQ,CAAC;AAEzB,YAAU,MAAM;AACd,QAAI,YAAY;AACR,YAAA;AAAA,IAAA;AAER,WAAO,MAAM,KAAK;AAAA,EACpB,GAAG,EAAE;AAEL,SAAO,EAAE,OAAO,MAAM,QAAQ,OAAO;AACvC;"}