{"version":3,"file":"index.js","sources":["../../../src/hooks/useInterval.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\ninterface UseIntervalOptions {\n  autoInvoke?: boolean;\n}\n\ninterface UseIntervalReturn {\n  start: () => void;\n  stop: () => void;\n  toggle: () => void;\n  active: boolean;\n}\n\nexport const useInterval = (\n  fn: () => void,\n  interval: number,\n  { autoInvoke = false }: UseIntervalOptions = {},\n): UseIntervalReturn => {\n  const [active, setActive] = useState<boolean>(false);\n  const intervalRef = useRef<number | null>(null);\n  const fnRef = useRef<() => void>(fn);\n\n  const start = (): void => {\n    setActive((old) => {\n      if (\n        !old &&\n        (intervalRef.current === null || intervalRef.current === -1)\n      ) {\n        intervalRef.current = window.setInterval(fnRef.current, interval);\n      }\n      return true;\n    });\n  };\n\n  const stop = (): void => {\n    setActive(false);\n    window.clearInterval(intervalRef.current ?? -1);\n    intervalRef.current = -1;\n  };\n\n  const toggle = (): void => {\n    if (active) {\n      stop();\n    } else {\n      start();\n    }\n  };\n\n  useEffect(() => {\n    fnRef.current = fn;\n    if (active) {\n      start();\n    }\n    return stop;\n  }, [fn, active, interval]);\n\n  useEffect(() => {\n    if (autoInvoke) {\n      start();\n    }\n    return () => stop();\n  }, []);\n\n  return { start, stop, toggle, active };\n};\n"],"names":["useInterval","fn","interval","autoInvoke","active","setActive","useState","intervalRef","useRef","fnRef","start","old","stop","toggle","useEffect"],"mappings":";AAaa,MAAAA,IAAc,CACzBC,GACAC,GACA,EAAE,YAAAC,IAAa,GAA8B,IAAA,OACvB;AACtB,QAAM,CAACC,GAAQC,CAAS,IAAIC,EAAkB,EAAK,GAC7CC,IAAcC,EAAsB,IAAI,GACxCC,IAAQD,EAAmBP,CAAE,GAE7BS,IAAQ,MAAY;AACxB,IAAAL,EAAU,CAACM,OAEP,CAACA,MACAJ,EAAY,YAAY,QAAQA,EAAY,YAAY,QAEzDA,EAAY,UAAU,OAAO,YAAYE,EAAM,SAASP,CAAQ,IAE3D,GACR;AAAA,EACH,GAEMU,IAAO,MAAY;AACvB,IAAAP,EAAU,EAAK,GACR,OAAA,cAAcE,EAAY,WAAW,EAAE,GAC9CA,EAAY,UAAU;AAAA,EACxB,GAEMM,IAAS,MAAY;AACzB,IAAIT,IACGQ,EAAA,IAECF,EAAA;AAAA,EAEV;AAEA,SAAAI,EAAU,OACRL,EAAM,UAAUR,GACZG,KACIM,EAAA,GAEDE,IACN,CAACX,GAAIG,GAAQF,CAAQ,CAAC,GAEzBY,EAAU,OACJX,KACIO,EAAA,GAED,MAAME,EAAK,IACjB,EAAE,GAEE,EAAE,OAAAF,GAAO,MAAAE,GAAM,QAAAC,GAAQ,QAAAT,EAAO;AACvC;"}