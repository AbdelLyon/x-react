{"version":3,"file":"x-react.es.js","sources":["../../../src/hooks/useInfiniteList.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport type FetchFunctionReturn<T> = {\n  items: T[];\n  hasMore: boolean;\n};\n\nexport type FetchFunction<T> = (\n  offset: number,\n  limit: number,\n) => Promise<FetchFunctionReturn<T>>;\n\nexport interface UseInfiniteListProps<T> {\n  fetchFunction: FetchFunction<T>;\n  fetchDelay?: number;\n  limit?: number;\n}\n\nexport interface UseInfiniteListReturn<T> {\n  items: T[];\n  hasMore: boolean;\n  isLoading: boolean;\n  onLoadMore: () => void;\n}\n\nexport function useInfiniteList<T>({\n  fetchFunction,\n  fetchDelay = 0,\n  limit = 10,\n}: UseInfiniteListProps<T>): UseInfiniteListReturn<T> {\n  const [items, setItems] = useState<T[]>([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [offset, setOffset] = useState(0);\n\n  const loadItems = async (currentOffset: number): Promise<void> => {\n    try {\n      setIsLoading(true);\n      if (offset > 0) {\n        await new Promise((resolve) => setTimeout(resolve, fetchDelay));\n      }\n\n      const { items: newItems, hasMore: moreAvailable } = await fetchFunction(\n        currentOffset,\n        limit,\n      );\n\n      setHasMore(moreAvailable);\n      setItems((prevItems) => [...prevItems, ...newItems]);\n    } catch (error) {\n      console.error(\"There was an error with the fetch operation:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadItems(offset);\n  }, []);\n\n  const onLoadMore = (): void => {\n    const newOffset = offset + limit;\n    setOffset(newOffset);\n    void loadItems(newOffset);\n  };\n\n  return {\n    items,\n    hasMore,\n    isLoading,\n    onLoadMore,\n  };\n}\n"],"names":[],"mappings":";AAyBO,SAAS,gBAAmB;AAAA,EACjC;AAAA,EACA,aAAa;AAAA,EACb,QAAQ;AACV,GAAsD;AACpD,QAAM,CAAC,OAAO,QAAQ,IAAI,SAAc,CAAA,CAAE;AAC1C,QAAM,CAAC,SAAS,UAAU,IAAI,SAAS,IAAI;AAC3C,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,KAAK;AAChD,QAAM,CAAC,QAAQ,SAAS,IAAI,SAAS,CAAC;AAEhC,QAAA,YAAY,OAAO,kBAAyC;AAC5D,QAAA;AACF,mBAAa,IAAI;AACjB,UAAI,SAAS,GAAG;AACd,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,UAAU,CAAC;AAAA,MAAA;AAGhE,YAAM,EAAE,OAAO,UAAU,SAAS,cAAA,IAAkB,MAAM;AAAA,QACxD;AAAA,QACA;AAAA,MACF;AAEA,iBAAW,aAAa;AACxB,eAAS,CAAC,cAAc,CAAC,GAAG,WAAW,GAAG,QAAQ,CAAC;AAAA,aAC5C,OAAO;AACN,cAAA,MAAM,gDAAgD,KAAK;AAAA,IAAA,UACnE;AACA,mBAAa,KAAK;AAAA,IAAA;AAAA,EAEtB;AAEA,YAAU,MAAM;AACd,SAAK,UAAU,MAAM;AAAA,EACvB,GAAG,EAAE;AAEL,QAAM,aAAa,MAAY;AAC7B,UAAM,YAAY,SAAS;AAC3B,cAAU,SAAS;AACnB,SAAK,UAAU,SAAS;AAAA,EAC1B;AAEO,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;"}