{"version":3,"file":"index.js","sources":["../../../src/hooks/useInfiniteList.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport type FetchFunctionReturn<T> = {\n  items: T[];\n  hasMore: boolean;\n};\n\nexport type FetchFunction<T> = (\n  offset: number,\n  limit: number,\n) => Promise<FetchFunctionReturn<T>>;\n\nexport interface UseInfiniteListProps<T> {\n  fetchFunction: FetchFunction<T>;\n  fetchDelay?: number;\n  limit?: number;\n}\n\nexport interface UseInfiniteListReturn<T> {\n  items: T[];\n  hasMore: boolean;\n  isLoading: boolean;\n  onLoadMore: () => void;\n}\n\nexport function useInfiniteList<T>({\n  fetchFunction,\n  fetchDelay = 0,\n  limit = 10,\n}: UseInfiniteListProps<T>): UseInfiniteListReturn<T> {\n  const [items, setItems] = useState<T[]>([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [offset, setOffset] = useState(0);\n\n  const loadItems = async (currentOffset: number): Promise<void> => {\n    try {\n      setIsLoading(true);\n      if (offset > 0) {\n        await new Promise((resolve) => setTimeout(resolve, fetchDelay));\n      }\n\n      const { items: newItems, hasMore: moreAvailable } = await fetchFunction(\n        currentOffset,\n        limit,\n      );\n\n      setHasMore(moreAvailable);\n      setItems((prevItems) => [...prevItems, ...newItems]);\n    } catch (error) {\n      console.error(\"There was an error with the fetch operation:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadItems(offset);\n  }, []);\n\n  const onLoadMore = (): void => {\n    const newOffset = offset + limit;\n    setOffset(newOffset);\n    void loadItems(newOffset);\n  };\n\n  return {\n    items,\n    hasMore,\n    isLoading,\n    onLoadMore,\n  };\n}\n"],"names":["useInfiniteList","fetchFunction","fetchDelay","limit","items","setItems","useState","hasMore","setHasMore","isLoading","setIsLoading","offset","setOffset","loadItems","currentOffset","resolve","newItems","moreAvailable","prevItems","error","useEffect","newOffset"],"mappings":";AAyBO,SAASA,EAAmB;AAAA,EACjC,eAAAC;AAAA,EACA,YAAAC,IAAa;AAAA,EACb,OAAAC,IAAQ;AACV,GAAsD;AACpD,QAAM,CAACC,GAAOC,CAAQ,IAAIC,EAAc,CAAA,CAAE,GACpC,CAACC,GAASC,CAAU,IAAIF,EAAS,EAAI,GACrC,CAACG,GAAWC,CAAY,IAAIJ,EAAS,EAAK,GAC1C,CAACK,GAAQC,CAAS,IAAIN,EAAS,CAAC,GAEhCO,IAAY,OAAOC,MAAyC;AAC5D,QAAA;AACF,MAAAJ,EAAa,EAAI,GACbC,IAAS,KACX,MAAM,IAAI,QAAQ,CAACI,MAAY,WAAWA,GAASb,CAAU,CAAC;AAGhE,YAAM,EAAE,OAAOc,GAAU,SAASC,EAAA,IAAkB,MAAMhB;AAAA,QACxDa;AAAA,QACAX;AAAA,MACF;AAEA,MAAAK,EAAWS,CAAa,GACxBZ,EAAS,CAACa,MAAc,CAAC,GAAGA,GAAW,GAAGF,CAAQ,CAAC;AAAA,aAC5CG,GAAO;AACN,cAAA,MAAM,gDAAgDA,CAAK;AAAA,IAAA,UACnE;AACA,MAAAT,EAAa,EAAK;AAAA,IAAA;AAAA,EAEtB;AAEA,SAAAU,EAAU,MAAM;AACd,IAAKP,EAAUF,CAAM;AAAA,EACvB,GAAG,EAAE,GAQE;AAAA,IACL,OAAAP;AAAA,IACA,SAAAG;AAAA,IACA,WAAAE;AAAA,IACA,YAViB,MAAY;AAC7B,YAAMY,IAAYV,IAASR;AAC3B,MAAAS,EAAUS,CAAS,GACdR,EAAUQ,CAAS;AAAA,IAC1B;AAAA,EAOA;AACF;"}