{"version":3,"file":"index.js","sources":["../../../src/hooks/useStateHistory.ts"],"sourcesContent":["import { useState } from \"react\";\n\nexport interface UseStateHistoryHandlers<T> {\n  set: (value: T) => void;\n  back: (steps?: number) => void;\n  forward: (steps?: number) => void;\n  reset: () => void;\n}\n\nexport interface StateHistory<T> {\n  history: T[];\n  current: number;\n}\n\ntype UseStateHistoryReturn<T> = [\n  T,\n  UseStateHistoryHandlers<T>,\n  StateHistory<T>,\n];\n\nexport const useStateHistory = <T>(\n  initialValue: T,\n): UseStateHistoryReturn<T> => {\n  const [state, setState] = useState<StateHistory<T>>({\n    history: [initialValue],\n    current: 0,\n  });\n\n  const handlers: UseStateHistoryHandlers<T> = {\n    set: (value: T): void => {\n      setState((currentState) => {\n        const nextState = [\n          ...currentState.history.slice(0, currentState.current + 1),\n          value,\n        ];\n        return {\n          history: nextState,\n          current: nextState.length - 1,\n        };\n      });\n    },\n\n    back: (steps: number = 1): void => {\n      setState((currentState) => ({\n        history: currentState.history,\n        current: Math.max(0, currentState.current - steps),\n      }));\n    },\n\n    forward: (steps: number = 1): void => {\n      setState((currentState) => ({\n        history: currentState.history,\n        current: Math.min(\n          currentState.history.length - 1,\n          currentState.current + steps,\n        ),\n      }));\n    },\n\n    reset: (): void => {\n      setState({\n        history: [initialValue],\n        current: 0,\n      });\n    },\n  };\n\n  return [state.history[state.current], handlers, state];\n};\n"],"names":["useStateHistory","initialValue","state","setState","useState","handlers","value","currentState","nextState","steps"],"mappings":";AAoBa,MAAAA,IAAkB,CAC7BC,MAC6B;AAC7B,QAAM,CAACC,GAAOC,CAAQ,IAAIC,EAA0B;AAAA,IAClD,SAAS,CAACH,CAAY;AAAA,IACtB,SAAS;AAAA,EAAA,CACV,GAEKI,IAAuC;AAAA,IAC3C,KAAK,CAACC,MAAmB;AACvB,MAAAH,EAAS,CAACI,MAAiB;AACzB,cAAMC,IAAY;AAAA,UAChB,GAAGD,EAAa,QAAQ,MAAM,GAAGA,EAAa,UAAU,CAAC;AAAA,UACzDD;AAAA,QACF;AACO,eAAA;AAAA,UACL,SAASE;AAAA,UACT,SAASA,EAAU,SAAS;AAAA,QAC9B;AAAA,MAAA,CACD;AAAA,IACH;AAAA,IAEA,MAAM,CAACC,IAAgB,MAAY;AACjC,MAAAN,EAAS,CAACI,OAAkB;AAAA,QAC1B,SAASA,EAAa;AAAA,QACtB,SAAS,KAAK,IAAI,GAAGA,EAAa,UAAUE,CAAK;AAAA,MAAA,EACjD;AAAA,IACJ;AAAA,IAEA,SAAS,CAACA,IAAgB,MAAY;AACpC,MAAAN,EAAS,CAACI,OAAkB;AAAA,QAC1B,SAASA,EAAa;AAAA,QACtB,SAAS,KAAK;AAAA,UACZA,EAAa,QAAQ,SAAS;AAAA,UAC9BA,EAAa,UAAUE;AAAA,QAAA;AAAA,MACzB,EACA;AAAA,IACJ;AAAA,IAEA,OAAO,MAAY;AACR,MAAAN,EAAA;AAAA,QACP,SAAS,CAACF,CAAY;AAAA,QACtB,SAAS;AAAA,MAAA,CACV;AAAA,IAAA;AAAA,EAEL;AAEA,SAAO,CAACC,EAAM,QAAQA,EAAM,OAAO,GAAGG,GAAUH,CAAK;AACvD;"}