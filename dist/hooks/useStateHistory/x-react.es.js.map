{"version":3,"file":"x-react.es.js","sources":["../../../src/hooks/useStateHistory.ts"],"sourcesContent":["import { useState } from \"react\";\n\nexport interface UseStateHistoryHandlers<T> {\n  set: (value: T) => void;\n  back: (steps?: number) => void;\n  forward: (steps?: number) => void;\n  reset: () => void;\n}\n\nexport interface StateHistory<T> {\n  history: T[];\n  current: number;\n}\n\ntype UseStateHistoryReturn<T> = [\n  T,\n  UseStateHistoryHandlers<T>,\n  StateHistory<T>,\n];\n\nexport const useStateHistory = <T>(\n  initialValue: T,\n): UseStateHistoryReturn<T> => {\n  const [state, setState] = useState<StateHistory<T>>({\n    history: [initialValue],\n    current: 0,\n  });\n\n  const handlers: UseStateHistoryHandlers<T> = {\n    set: (value: T): void => {\n      setState((currentState) => {\n        const nextState = [\n          ...currentState.history.slice(0, currentState.current + 1),\n          value,\n        ];\n        return {\n          history: nextState,\n          current: nextState.length - 1,\n        };\n      });\n    },\n\n    back: (steps: number = 1): void => {\n      setState((currentState) => ({\n        history: currentState.history,\n        current: Math.max(0, currentState.current - steps),\n      }));\n    },\n\n    forward: (steps: number = 1): void => {\n      setState((currentState) => ({\n        history: currentState.history,\n        current: Math.min(\n          currentState.history.length - 1,\n          currentState.current + steps,\n        ),\n      }));\n    },\n\n    reset: (): void => {\n      setState({\n        history: [initialValue],\n        current: 0,\n      });\n    },\n  };\n\n  return [state.history[state.current], handlers, state];\n};\n"],"names":[],"mappings":";AAoBa,MAAA,kBAAkB,CAC7B,iBAC6B;AAC7B,QAAM,CAAC,OAAO,QAAQ,IAAI,SAA0B;AAAA,IAClD,SAAS,CAAC,YAAY;AAAA,IACtB,SAAS;AAAA,EAAA,CACV;AAED,QAAM,WAAuC;AAAA,IAC3C,KAAK,CAAC,UAAmB;AACvB,eAAS,CAAC,iBAAiB;AACzB,cAAM,YAAY;AAAA,UAChB,GAAG,aAAa,QAAQ,MAAM,GAAG,aAAa,UAAU,CAAC;AAAA,UACzD;AAAA,QACF;AACO,eAAA;AAAA,UACL,SAAS;AAAA,UACT,SAAS,UAAU,SAAS;AAAA,QAC9B;AAAA,MAAA,CACD;AAAA,IACH;AAAA,IAEA,MAAM,CAAC,QAAgB,MAAY;AACjC,eAAS,CAAC,kBAAkB;AAAA,QAC1B,SAAS,aAAa;AAAA,QACtB,SAAS,KAAK,IAAI,GAAG,aAAa,UAAU,KAAK;AAAA,MAAA,EACjD;AAAA,IACJ;AAAA,IAEA,SAAS,CAAC,QAAgB,MAAY;AACpC,eAAS,CAAC,kBAAkB;AAAA,QAC1B,SAAS,aAAa;AAAA,QACtB,SAAS,KAAK;AAAA,UACZ,aAAa,QAAQ,SAAS;AAAA,UAC9B,aAAa,UAAU;AAAA,QAAA;AAAA,MACzB,EACA;AAAA,IACJ;AAAA,IAEA,OAAO,MAAY;AACR,eAAA;AAAA,QACP,SAAS,CAAC,YAAY;AAAA,QACtB,SAAS;AAAA,MAAA,CACV;AAAA,IAAA;AAAA,EAEL;AAEA,SAAO,CAAC,MAAM,QAAQ,MAAM,OAAO,GAAG,UAAU,KAAK;AACvD;"}