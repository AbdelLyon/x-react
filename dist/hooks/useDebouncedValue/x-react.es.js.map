{"version":3,"file":"x-react.es.js","sources":["../../../src/hooks/useDebouncedValue.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nexport const useDebouncedValue = <T>(\n  value: T,\n  wait: number,\n  options = { leading: false },\n): readonly [T, () => void] => {\n  const [_value, setValue] = useState(value);\n  const mountedRef = useRef(false);\n  const timeoutRef = useRef<number | null>(null);\n  const cooldownRef = useRef(false);\n\n  const cancel = (): void => {\n    if (timeoutRef.current !== null) {\n      window.clearTimeout(timeoutRef.current);\n    }\n  };\n\n  useEffect(() => {\n    if (mountedRef.current) {\n      if (!cooldownRef.current && options.leading) {\n        cooldownRef.current = true;\n        setValue(value);\n      } else {\n        cancel();\n        timeoutRef.current = window.setTimeout(() => {\n          cooldownRef.current = false;\n          setValue(value);\n        }, wait);\n      }\n    }\n  }, [value, options.leading, wait]);\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return cancel;\n  }, []);\n\n  return [_value, cancel] as const;\n};\n"],"names":[],"mappings":";AAEa,MAAA,oBAAoB,CAC/B,OACA,MACA,UAAU,EAAE,SAAS,YACQ;AAC7B,QAAM,CAAC,QAAQ,QAAQ,IAAI,SAAS,KAAK;AACnC,QAAA,aAAa,OAAO,KAAK;AACzB,QAAA,aAAa,OAAsB,IAAI;AACvC,QAAA,cAAc,OAAO,KAAK;AAEhC,QAAM,SAAS,MAAY;AACrB,QAAA,WAAW,YAAY,MAAM;AACxB,aAAA,aAAa,WAAW,OAAO;AAAA,IAAA;AAAA,EAE1C;AAEA,YAAU,MAAM;AACd,QAAI,WAAW,SAAS;AACtB,UAAI,CAAC,YAAY,WAAW,QAAQ,SAAS;AAC3C,oBAAY,UAAU;AACtB,iBAAS,KAAK;AAAA,MAAA,OACT;AACE,eAAA;AACI,mBAAA,UAAU,OAAO,WAAW,MAAM;AAC3C,sBAAY,UAAU;AACtB,mBAAS,KAAK;AAAA,WACb,IAAI;AAAA,MAAA;AAAA,IACT;AAAA,KAED,CAAC,OAAO,QAAQ,SAAS,IAAI,CAAC;AAEjC,YAAU,MAAM;AACd,eAAW,UAAU;AACd,WAAA;AAAA,EACT,GAAG,EAAE;AAEE,SAAA,CAAC,QAAQ,MAAM;AACxB;"}